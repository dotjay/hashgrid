!function(a,b){var c=function(){"use strict";function a(a,b){var c,d=Object.getOwnPropertyNames(b),e=d.length;for(c=0;e>c;c++)a[d[c]]=b[d[c]]}return{getKey:function(a){var b=!1,c=a.keyCode?a.keyCode:a.which;return b=13==c?"enter":String.fromCharCode(c).toLowerCase()},getKeyModifier:function(a,b){if(null===b)return!0;var c=!0;switch(b){case"ctrl":c=a.ctrlKey?a.ctrlKey:!1;break;case"alt":c=a.altKey?a.altKey:!1;break;case"shift":c=a.shiftKey?a.shiftKey:!1}return c},mergeObjects:function(b,c,d){return b||c||d?b&&"object"!=typeof b||c&&"object"!=typeof c||d&&"object"!=typeof d?{}:(c&&a(b,c),d&&a(b,d),b):{}},forceRepaint:function(){var a=b.styleSheets[0];try{a.addRule(".xxxxxx","position: relative"),a.removeRule(a.rules.length-1)}catch(c){}}}}(),d=function(){"use strict";function a(){}return a.prototype.read=function(a){var c,d=b.cookie.split(";"),e=0,f=d.length;for(a+="=";f>e;e++){for(c=d[e];" "===c.charAt(0);)c=c.substring(1,c.length);if(0===c.indexOf(a))return JSON.parse(c.substring(a.length,c.length))}return null},a.prototype.write=function(a,c,d){var e,f="",g="";return d&&(e=new Date,e.setTime(e.getTime()+24*d*60*60*1e3),f="; expires="+e.toGMTString()),g=a+"="+JSON.stringify(c)+f+"; path=/",b.cookie=g,g},a.prototype.remove=function(a){var b=this.read(a);return b?(this.write(a,"",-1),b):null},a}(),e=function(){"use strict";function b(){this.storage=a.sessionStorage}return b.prototype.read=function(a){var b=this.storage.getItem(a);return b?JSON.parse(b):null},b.prototype.write=function(a,b){return this.storage.setItem(a,JSON.stringify(b)),b},b.prototype.remove=function(a){var b=this.read(a);return b?(this.storage.removeItem(a),b):null},b}(),f=function(){"use strict";function b(){return this.hasSessionStorage()?new e:new d}return b.prototype.hasSessionStorage=function(){try{var b=a.sessionStorage,c="some value";return b.setItem(c,c),b.removeItem(c),!0}catch(d){return!1}},b}(),g=function(){"use strict";function a(a){var b={id:"hashgrid",modifierKey:null,showGridKey:"g",holdGridKey:"h",foregroundKey:"f",jumpGridsKey:"j",numberOfGrids:1,classPrefix:"hashgrid",storagePrefix:"hashgrid"},d={overlayZBG:"-1",overlayZFG:"9999"};this.options=c.mergeObjects(b,a,d),this.state={overlayHold:!1,overlayOn:!1,overlayZIndex:"B",isKeyDown:{},gridNumber:1},this.init()}var d,e,g,h,i,j,k=new f;return a.prototype.init=function(){var a;this.overlay=b.createElement("div"),this.overlay.id=this.options.id,this.overlay.classList.add(this.options.classPrefix+this.state.gridNumber),this.overlay.style.display="none",this.overlay.style.pointerEvents="none",this.overlay.style.height=b.body.scrollHeight+"px","auto"===this.overlay.style.zIndex&&(this.overlay.style.zIndex=this.overlayZBackground),b.body.insertBefore(this.overlay,b.body.firstChild),e=g.bind(this),h=i.bind(this),b.addEventListener?(b.addEventListener("keydown",e,!1),b.addEventListener("keyup",h,!1)):b.attachEvent&&(b.attachEvent("onkeydown",e),b.attachEvent("onkeyup",h)),d.call(this),a=k.read(this.options.storagePrefix+this.options.id),a&&(a.gridNumber&&(this.overlay.classList.remove(this.options.classPrefix+this.state.gridNumber),this.overlay.classList.add(this.options.classPrefix+a.gridNumber),this.state.gridNumber=a.gridNumber),a.overlayHold&&(this.overlay.style.display="block",this.state.overlayOn=!0,this.state.overlayHold=!0),a.overlayZIndex&&("B"===a.overlayZIndex?this.overlay.style.zIndex=this.options.overlayZBG:"F"===a.overlayZIndex&&(this.overlay.style.zIndex=this.options.overlayZFG),this.state.overlayZIndex=a.overlayZIndex))},a.prototype.showOverlay=function(){this.overlay.style.display="block",this.state.overlayOn=!0},a.prototype.hideOverlay=function(){this.overlay.style.display="none",this.state.overlayOn=!1},a.prototype.destroy=function(){this.overlay.remove(),k.remove(this.options.storagePrefix+this.options.id),b.removeEventListener?(b.removeEventListener("keydown",e),b.removeEventListener("keyup",h)):b.detachevent&&(b.detachEvent("onkeydown",e),b.detachEvent("onkeyup",h))},d=function(){var a,c,d,e,f=b.createElement("div"),g=b.createElement("div"),h=0,i=b.createDocumentFragment(),j=this.options,k=this.overlay,l=b.createElement("div"),m=b.createElement("div"),n=0;if(l.classList.add(j.id+"-row-container"),f.classList.add(j.id+"-column-container"),k.appendChild(l),k.appendChild(f),m.classList.add(j.id+"__row"),g.classList.add(j.id+"__column"),l.appendChild(m),f.appendChild(g),k.style.display="block",k.top="-9999px",c=k.scrollHeight,d=k.scrollWidth,e=m.getBoundingClientRect().height,a=g.clientWidth,k.style.display="none",k.top="0",!e&&!a)return!1;if(e){for(n=Math.floor(c/e)-1;n--;)m=b.createElement("div"),m.classList.add(j.id+"__row"),i.appendChild(m);l.appendChild(i)}else l.remove(m);if(a){for(h=Math.floor(d/a)-2;h--;)g=b.createElement("div"),g.classList.add(j.id+"__column"),i.appendChild(g);f.appendChild(i)}else f.remove(g)},g=function(a){var b,d,e=this.options,f=this.state,g=a.target.tagName.toLowerCase();if("input"==g||"textarea"==g||"select"==g)return!0;if(d=c.getKeyModifier(a,e.modifierKey),!d)return!0;if(b=c.getKey(a),!b)return!0;if(f.isKeyDown[b])return!0;switch(f.isKeyDown[b]=!0,b){case e.showGridKey:f.overlayOn?f.overlayHold&&(this.hideOverlay(),f.overlayOn=!1,f.overlayHold=!1,k.write(e.storagePrefix+e.id,j.call(this))):(this.showOverlay(),f.overlayOn=!0);break;case e.holdGridKey:f.overlayOn&&!f.overlayHold&&(f.overlayHold=!0,k.write(e.storagePrefix+e.id,j.call(this)));break;case e.foregroundKey:f.overlayOn&&(this.overlay.style.zIndex===e.overlayZFG?(this.overlay.style.zIndex=e.overlayZBG,f.overlayZIndex="B"):(this.overlay.style.zIndex=e.overlayZFG,f.overlayZIndex="F"),k.write(e.storagePrefix+e.id,j.call(this)));break;case e.jumpGridsKey:f.overlayOn&&e.numberOfGrids>1&&(this.overlay.classList.remove(e.classPrefix+f.gridNumber),f.gridNumber+=1,f.gridNumber>e.numberOfGrids&&(f.gridNumber=1),this.overlay.classList.add(e.classPrefix+f.gridNumber),this.showOverlay(),/webkit/.test(navigator.userAgent.toLowerCase())&&c.forceRepaint(),k.write(e.storagePrefix+e.id,j.call(this)))}return!0},i=function(a){var b,d=c.getKeyModifier(a),e=this.options,f=this.state;return d?(b=c.getKey(a),delete f.isKeyDown[b],b&&b==e.showGridKey&&!f.overlayHold&&(this.hideOverlay(),f.overlayOn=!1),!0):!0},j=function(){var a=this.state;return{gridNumber:a.gridNumber,overlayHold:a.overlayHold,overlayZIndex:a.overlayZIndex}},a}();a.Hashgrid=g}(window,document);